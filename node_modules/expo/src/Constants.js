// @flow

import { NativeModules } from 'react-native';

// On Android we pass the manifest in JSON form so this step is necessary
const { ExponentConstants } = NativeModules;

let manifest;
if (ExponentConstants) {
  manifest = ExponentConstants.manifest;
  if (typeof manifest === 'string') {
    manifest = JSON.parse(manifest);
  }
}

let installationId;
if (ExponentConstants) {
  installationId = ExponentConstants.deviceId || ExponentConstants.installationId;
}

export default {
  ...ExponentConstants,
  linkingUrl: ExponentConstants.linkingUri,
  deviceId: installationId,
  installationId,
  manifest,
};
